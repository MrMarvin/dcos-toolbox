{
  "id": "hdfs",
  "instances": 1,
  "cpus": 2,
  "mem": 8192,
  "uris": [
    "https://downloads.mesosphere.com/java/jre-8u112-linux-x64-jce-unlimited.tar.gz",
    "https://downloads.mesosphere.com/hdfs/assets/1.2.0-2.6.0-cdh5.9.1/hdfs-scheduler.zip",
    "https://downloads.mesosphere.com/libmesos-bundle/libmesos-bundle-1.9.0-rc2-1.2.0-rc2-1.tar.gz"
  ],
  "cmd": "export LD_LIBRARY_PATH=$MESOS_SANDBOX/libmesos-bundle/lib:$LD_LIBRARY_PATH; export MESOS_NATIVE_JAVA_LIBRARY=$(ls $MESOS_SANDBOX/libmesos-bundle/lib/libmesos-*.so); export JAVA_HOME=$(ls -d $MESOS_SANDBOX/jre*/); export JAVA_HOME=${JAVA_HOME%/}; export PATH=$(ls -d $JAVA_HOME/bin):$PATH && ./hdfs-scheduler/bin/hdfs ./hdfs-scheduler/svc.yml",
  "env": {
    "BOOTSTRAP_URI": "https://downloads.mesosphere.com/hdfs/assets/1.2.0-2.6.0-cdh5.9.1/bootstrap.zip",
    "CONFIG_TEMPLATE_PATH": "hdfs-scheduler",
    "DATA_COUNT": "3",
    "DATA_CPUS": "2",
    "DATA_DISK": "20480",
    "DATA_DISK_TYPE": "ROOT",
    "DATA_MEM": "4096",
    "DEPLOY_STRATEGY": "parallel",
    "EXECUTOR_URI": "https://downloads.mesosphere.com/hdfs/assets/1.2.0-2.6.0-cdh5.9.1/executor.zip",
    "FRAMEWORK_NAME": "hdfs",
    "HDFS_URI": "https://downloads.mesosphere.com/hdfs/assets/hadoop-2.6.0-cdh5.9.1-dcos.tar.gz",
    "HDFS_VERSION": "hadoop-2.6.0-cdh5.9.1",
    "JOURNAL_CPUS": "1",
    "JOURNAL_DISK": "5000",
    "JOURNAL_DISK_TYPE": "ROOT",
    "JOURNAL_MEM": "1024",
    "JRE_VERSION": "jre1.8.0_112",
    "LIBMESOS_URI": "https://downloads.mesosphere.com/libmesos-bundle/libmesos-bundle-1.9.0-rc2-1.2.0-rc2-1.tar.gz",
    "NAME_CPUS": "2",
    "NAME_DISK": "5000",
    "NAME_DISK_TYPE": "ROOT",
    "NAME_MEM": "8192",
    "SERVICE_PRINCIPAL": "hdfs-principal",
    "TASKCFG_ALL_ADMINISTRATORS": "core,centos,azureuser",
    "TASKCFG_ALL_CLIENT_FAILOVER_PROXY_PROVIDER_HDFS": "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider",
    "TASKCFG_ALL_CLIENT_READ_SHORTCIRCUIT": "true",
    "TASKCFG_ALL_CLIENT_READ_SHORTCIRCUIT_PATH": "/var/lib/hadoop-hdfs/dn_socket",
    "TASKCFG_ALL_CLIENT_READ_SHORTCIRCUIT_STREAMS_CACHE_SIZE": "1000",
    "TASKCFG_ALL_CLIENT_READ_SHORTCIRCUIT_STREAMS_CACHE_SIZE_EXPIRY_MS": "1000",
    "TASKCFG_ALL_DATA_NODE_BALANCE_BANDWIDTH_PER_SEC": "41943040",
    "TASKCFG_ALL_DATA_NODE_HANDLER_COUNT": "10",
    "TASKCFG_ALL_DATA_NODE_HTTP_PORT": "9004",
    "TASKCFG_ALL_DATA_NODE_IPC_PORT": "9005",
    "TASKCFG_ALL_DATA_NODE_RPC_PORT": "9003",
    "TASKCFG_ALL_HADOOP_PROXYUSER_HTTPFS_GROUPS": "*",
    "TASKCFG_ALL_HADOOP_PROXYUSER_HTTPFS_HOSTS": "*",
    "TASKCFG_ALL_HADOOP_PROXYUSER_HUE_GROUPS": "*",
    "TASKCFG_ALL_HADOOP_PROXYUSER_HUE_HOSTS": "*",
    "TASKCFG_ALL_HADOOP_PROXYUSER_ROOT_GROUPS": "*",
    "TASKCFG_ALL_HADOOP_PROXYUSER_ROOT_HOSTS": "*",
    "TASKCFG_ALL_HADOOP_ROOT_LOGGER": "INFO,console",
    "TASKCFG_ALL_HA_AUTOMATIC_FAILURE": "true",
    "TASKCFG_ALL_HA_FENCING_METHODS": "shell(/bin/true)",
    "TASKCFG_ALL_IMAGE_COMPRESS": "true",
    "TASKCFG_ALL_IMAGE_COMPRESSION_CODEC": "org.apache.hadoop.io.compress.SnappyCodec",
    "TASKCFG_ALL_JOURNAL_NODE_HTTP_PORT": "8480",
    "TASKCFG_ALL_JOURNAL_NODE_RPC_PORT": "8485",
    "TASKCFG_ALL_JRE_VERSION": "jre1.8.0_112",
    "TASKCFG_ALL_NAME_NODE_DATA_NODE_REGISTRATION_IP_HOSTNAME_CHECK": "false",
    "TASKCFG_ALL_NAME_NODE_HANDLER_COUNT": "20",
    "TASKCFG_ALL_NAME_NODE_HEARTBEAT_RECHECK_INTERVAL": "60000",
    "TASKCFG_ALL_NAME_NODE_HTTP_PORT": "9002",
    "TASKCFG_ALL_NAME_NODE_INVALIDATE_WORK_PCT_PER_ITERATION": "0.95",
    "TASKCFG_ALL_NAME_NODE_REPLICATION_WORK_MULTIPLIER_PER_ITERATION": "4",
    "TASKCFG_ALL_NAME_NODE_RPC_PORT": "9001",
    "TASKCFG_ALL_NAME_NODE_SAFEMODE_THRESHOLD_PCT": "0.9",
    "TASKCFG_ALL_PERMISSIONS_ENABLED": "false",
    "TASKCFG_ALL_SERVICE_ZK_ROOT": "dcos-service-hdfs",
    "TASKCFG_ALL_TASK_USER": "root",
    "ZKFC_CPUS": "1",
    "ZKFC_MEM": "1024"
  },
  "labels": {
    "DCOS_MIGRATION_API_PATH": "/v1/plan",
    "DCOS_MIGRATION_API_VERSION": "v1",
    "DCOS_PACKAGE_COMMAND": "eyJwaXAiOlsiaHR0cHM6Ly9kb3dubG9hZHMubWVzb3NwaGVyZS5jb20vaGRmcy9hc3NldHMvMS4yLjAtMi42LjAtY2RoNS45LjEvYmluX3dyYXBwZXItMC4wLjEtcHkyLnB5My1ub25lLWFueS53aGwiXX0=",
    "DCOS_PACKAGE_FRAMEWORK_NAME": "hdfs",
    "DCOS_PACKAGE_IS_FRAMEWORK": "true",
    "DCOS_PACKAGE_METADATA": "eyJwYWNrYWdpbmdWZXJzaW9uIjoiMy4wIiwibmFtZSI6ImhkZnMiLCJ2ZXJzaW9uIjoiMS4yLjAtMi42LjAtY2RoNS45LjEiLCJtYWludGFpbmVyIjoic3VwcG9ydEBtZXNvc3BoZXJlLmlvIiwiZGVzY3JpcHRpb24iOiJBcGFjaGUgSGFkb29wIERpc3RyaWJ1dGVkIEZpbGUgU3lzdGVtIChIREZTKSIsInRhZ3MiOlsiaGRmcyIsImhhZG9vcCJdLCJzZWxlY3RlZCI6ZmFsc2UsImZyYW1ld29yayI6dHJ1ZSwicHJlSW5zdGFsbE5vdGVzIjoiSW4gb3JkZXIgZm9yIEhERlMgdG8gc3RhcnQgc3VjY2Vzc2Z1bGx5LCBpdCByZXF1aXJlcyBhIG1pbmltdW0gb2YgZml2ZSBub2RlczsgZWFjaCB3aXRoIGF0IGxlYXN0IDIgQ1BVIHNoYXJlcyBhbmQgOEdCIG9mIFJBTSBhdmFpbGFibGUgZm9yIHVzZSBieSB0aGUgSERGUyBTZXJ2aWNlLlxuTm90ZSB0aGF0IHRoZSBzZXJ2aWNlIGlzIGNvbnNpZGVyZWQgUHJldmlldyBhbmQgdGhlcmUgbWF5IGJlIGJ1Z3MsIG1pc3NpbmcgZmVhdHVyZXMgb3IgZG9jdW1lbnRhdGlvbiwgYW5kIHNob3VsZCBiZSB0ZXN0ZWQgdGhvcm91Z2hseSBiZWZvcmUgYmVpbmcgcHV0IGludG8gcHJvZHVjdGlvbi4iLCJwb3N0SW5zdGFsbE5vdGVzIjoiREMvT1MgQXBhY2hlIEhERlMgU2VydmljZSBpcyBiZWluZyBpbnN0YWxsZWQuXG5cblx0RG9jdW1lbnRhdGlvbjogaHR0cHM6Ly9kb2NzLm1lc29zcGhlcmUuY29tL2N1cnJlbnQvdXNhZ2Uvc2VydmljZS1ndWlkZXMvaGRmcy9cblx0SXNzdWVzOiBodHRwczovL2ppcmEuZGNvcy5pby9wcm9qZWN0cy9EQ09TX0hERlMiLCJwb3N0VW5pbnN0YWxsTm90ZXMiOiJEQy9PUyBBcGFjaGUgSERGUyBTZXJ2aWNlIGhhcyBiZWVuIHVuaW5zdGFsbGVkLlxuUGxlYXNlIGZvbGxvdyB0aGUgaW5zdHJ1Y3Rpb25zIGF0IGh0dHA6Ly9kb2NzLm1lc29zcGhlcmUuY29tL2N1cnJlbnQvdXNhZ2Uvc2VydmljZS1ndWlkZXMvaGRmcy8jdW5pbnN0YWxsIHRvIHJlbW92ZSBhbnkgcGVyc2lzdGVudCBzdGF0ZSBpZiByZXF1aXJlZC4iLCJpbWFnZXMiOnsiaWNvbi1zbWFsbCI6Imh0dHBzOi8vZG93bmxvYWRzLm1lc29zcGhlcmUuY29tL2hkZnMvYXNzZXRzL2ljb24tc2VydmljZS1oZGZzLXNtYWxsLnBuZyIsImljb24tbWVkaXVtIjoiaHR0cHM6Ly9kb3dubG9hZHMubWVzb3NwaGVyZS5jb20vaGRmcy9hc3NldHMvaWNvbi1zZXJ2aWNlLWhkZnMtbWVkaXVtLnBuZyIsImljb24tbGFyZ2UiOiJodHRwczovL2Rvd25sb2Fkcy5tZXNvc3BoZXJlLmNvbS9oZGZzL2Fzc2V0cy9pY29uLXNlcnZpY2UtaGRmcy1sYXJnZS5wbmcifX0=",
    "DCOS_PACKAGE_NAME": "hdfs",
    "DCOS_PACKAGE_REGISTRY_VERSION": "3.0",
    "DCOS_PACKAGE_RELEASE": "10",
    "DCOS_PACKAGE_SOURCE": "https://universe.mesosphere.com/repo",
    "DCOS_PACKAGE_VERSION": "1.2.0-2.6.0-cdh5.9.1",
    "DCOS_SERVICE_NAME": "hdfs",
    "DCOS_SERVICE_PORT_INDEX": "0",
    "DCOS_SERVICE_SCHEME": "http",
    "MARATHON_SINGLE_INSTANCE_APP": "true"
  },
  "upgradeStrategy": {
    "maximumOverCapacity": 0,
    "minimumHealthCapacity": 0
  },
  "portDefinitions": [
    {
      "labels": {
        "VIP_0": "/api.hdfs:80"
      },
      "name": "api",
      "port": 0,
      "protocol": "tcp"
    }
  ],
  "healthChecks": [
    {
      "protocol": "MESOS_HTTP",
      "path": "/v1/plan",
      "portIndex": 0,
      "gracePeriodSeconds": 30,
      "intervalSeconds": 20,
      "timeoutSeconds": 10,
      "maxConsecutiveFailures": 3
    }
  ]
}
